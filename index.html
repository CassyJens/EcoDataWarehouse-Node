<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>uwlecow</title>
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="./assets/css/app.css" rel="stylesheet" media="screen">
    <link href="./assets/img/glyphicons-halflings-white.png"></link>
</head>
<body>

	<div class="page-header">
	  <h1>UW-La Crosse <small>Ecological Data Warehouse</small></h1>
	</div>

	<div id="upload-files" class="container" style="border: 1px solid lightslategray; padding: 10px;">
		<fieldset>
			<legend> Upload Files </legend>
			<form id="upload-files-form" name="upload-files-form" enctype="multipart/form-data" class="no-margin form-horizontal">
				<div class="control-group">	
					<input id="files-to-upload" type="file" name="file" multiple="multiple" />
				</div>
				<div class="control-group">
					<select multiple="multiple" id="prototypewg" name="prototypewg">

					</select>
				</div>
<!--				
<div class="control-group">
	<select multiple="multiple" id="prototypefg" name="prototypefg">
		
	</select>
</div>
-->				
				<div id="file-upload-status" class="alert alert-success hidden"> 
					<button type="button" class="close" data-hide="alert">&times;</button>
					<b> Success! </b> Your file upload is complete. 
				</div> 	
				<button type="button" class="btn">Cancel</button>
		        <input type="submit" id="upload-files-btn" name="submit" value="Upload" class="btn btn-primary">
			</form>
		</fieldset>
	</div>

	<div id="create-working-group">
		<fieldset>
			<legend> Working Group </legend>
			<form id="wgCreateForm" action="#" class="form-inline">
		        <input id="name" placeholder="Name" type="text" />
		        <input id="description" placeholder="Description" type="text" />
		        <button class="btn btn-primary" id="addWG">Add</button>
			</form>
			<div id="wgCreateSuccess" class="alert alert-success hidden"> 
				<button type="button" class="close" data-hide="alert">&times;</button>
				<p><b> Success! </b> Your working group has been created.</p>
			</div> 				
		</fieldset>
	</div>   

	<div id="create-file-group">
		<fieldset>
			<legend> File Group </legend>
			<form id="fgCreateForm" action="#" class="form-inline">
		        <input id="name" placeholder="Name" type="text" />
		        <input id="description" placeholder="Description" type="text" />
		        <button class="btn btn-primary" id="addFG">Add</button>
			</form>
			<div id="fgCreateSuccess" class="alert alert-success hidden"> 
				<button type="button" class="close" data-hide="alert">&times;</button>
				<p><b> Success! </b> Your file group has been created. </p>
			</div> 				
		</fieldset>
	</div> 	

	<div id="create-user">
		<fieldset>
			<legend> User </legend>
			<form id="userCreateForm" action="#" class="form-inline">
		        <input id="firstname" placeholder="First" type="text" />
		        <input id="lastname" placeholder="Last" type="text" />
		        <input id="email" placeholder="Email" type="text" />
		        <input id="pw" placeholder="Password" type="text" />
		        <button class="btn btn-primary" id="addUser">Add</button>
			</form>
			<div id="userCreateSuccess" class="alert alert-success hidden"> 
				<button type="button" class="close" data-hide="alert">&times;</button>
				<p> <b> Success! </b> Your new user has been created. </p>
			</div> 				
		</fieldset>
	</div>

	<!-- templates -->
	<script type="text/template" id="wgItem-template">
	<li>
	    <%= name %>,
	    <%= description %>
	</li>
	</script>

	<!-- assets -->
	<script src="./assets/js/jquery-1.8.2.min.js"></script>
	<script src="./assets/js/underscore-min.js"></script>
	<script src="./assets/js/backbone-min.js"></script>
	<script src="./assets/js/bootstrap.min.js"></script>

	<!-- views -->
	<script src="./backbone/views/putWGview.js"></script>
	<script src="./backbone/views/putFGview.js"></script>
	<script src="./backbone/views/userview.js"></script>

	<!-- models -->
	<script src="./backbone/models/fg.js"></script>
	<script src="./backbone/models/wg.js"></script>
	<script src="./backbone/models/file.js"></script>
	<script src="./backbone/models/user.js"></script>

	<!-- collections -->
	<script src="./backbone/collections/workinggroups.js"></script>
	<script src="./backbone/collections/filegroups.js"></script>
	<script src="./backbone/collections/users.js"></script>

	<!-- backbone -->
	<script src="./backbone/app.js"></script>	

	<script>
		// Populate the working group dropdown for file upload.
		var wgcollection = new WorkingGroups(); // Instantiate the collection.
	  	var initiateWGDropDown = function() {
	  		var innerHTML = '';
	  		wgcollection.each(function(model) {
	  			console.log(model);
	  			var attributes = model.attributes;
	  			innerHTML += '<option value=' + attributes._id + '>' + attributes.name + '</option>';
	  		});
	  		$('#prototypewg').html(innerHTML);
  		};	
	  	wgcollection.fetch({success : initiateWGDropDown});

	  	// Do the same for the file group dropdown
	  	var fgcollection = new FileGroups();
	  	var initiateFGDropDown = function() {
	  		var innerHTML = '';
	  		fgcollection.each(function(model) {
	  			console.log(model);
	  			var attributes = model.attributes;
	  			innerHTML += '<option value=' + attributes._id + '>' + attributes.name + '</option>';
	  		});
	  		$('#prototypefg').html(innerHTML);
	  	};
	  	fgcollection.fetch({success : initiateFGDropDown});
	</script>

</body>
</html>